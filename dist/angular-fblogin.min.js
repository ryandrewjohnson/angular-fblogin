/**
 * angular-fblogin - v1.0.0 (2014-09-26)
 * https://github.com/ryandrewjohnson/angular-fblogin
 * Copyright (c) 2014 Ryan Johnson; Licensed MIT 
 */
!function(){"use strict";angular.module("angularFblogin",[]).factory("$fblogin",function(a){var b,c,d,e,f;return b={init:function(){if(!e.fbId)throw new Error('Required option "fbId" is missing!');e.permissions=e.permissions||"",e.fields=e.fields||"",e.success=e.success||function(){},e.error=e.error||function(){},b.listenForFbAsync()},listenForFbAsync:function(){if(window.fbAsyncInit)var a=window.fbAsyncInit;return window.fbAsyncInit=function(){b.initFB(),c=!0,a&&a()},c||window.FB?void window.fbAsyncInit():void 0},initFB:function(){d||(window.FB.init({appId:e.fbId,cookie:!0,xfbml:!0,version:"v2.0"}),d=!0),f.notify({status:"init.fblogin"})},loginToFB:function(){window.FB.login(function(a){a.authResponse?f.notify({status:"authenticate.fblogin",data:a}):f.reject({error:{message:"User cancelled login or did not fully authorize."}})},{scope:e.permissions,return_scopes:!0})},getFbFields:function(){FB.api("/me",{fields:e.fields},function(a){a&&!a.error?f.resolve(a):f.reject(a)})},onComplete:function(a){e.success(a)},onProgress:function(a){"init.fblogin"===a.status?b.loginToFB():"authenticate.fblogin"===a.status?b.getFbFields(a.data.authResponse.accessToken):f.reject()},onError:function(a){e.error(a)}},function(g){return e=g||{},c=!1,d=!1,f=a.defer(),f.promise.then(b.onComplete,b.onError,b.onProgress),b.init(e),f.promise}})}();